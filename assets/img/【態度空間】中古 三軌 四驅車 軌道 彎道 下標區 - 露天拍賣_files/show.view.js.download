!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}({0:function(e,t,i){function n(){var e=$(".rt-tab-container");return function(){return e.offset().top-40}}function o(e,t){var i=window.location.pathname+window.location.search+e;return t&&(i+="&p="+t),i}i("./services/AjaxIdentityCheckService.js"),i("./services/AjaxGoodsRemovalService.js"),i("./services/AjaxFavoriteFunctionService.js"),i("./services/AjaxGoodsQnADataService.js"),i("./services/AjaxGoodsHistoryDataService.js"),i("./services/BrowserStorageService.js"),i("./services/AjaxGetAlsoViewGoodsInfoService.js"),i("./services/AjaxGetSellerBestGoodsService.js"),i("./services/AjaxSendAlsoViewClickLogService.js"),i("./d/components/goods_spec_chooser.js"),i("./d/components/rt_ad_ui.js"),i("./d/components/goods_gallery.js"),window.viewStartPosition=0;var s={init:function(){function e(){var a,r;++o,a=t(),o<=s&&(r=i(n,o),window.scrollTo(0,r),requestAnimationFrame(e))}function t(){return 0==document.documentElement.scrollTop?document.body.scrollTop:document.documentElement.scrollTop}function i(e,t){var i=function(e,t,i,n){return i*(e/=n)*e+t};return n-i(t,0,e,s)}var n,o,s=30;$("#to_top").click(function(i){o=0,n=t(),window.requestAnimationFrame?(requestAnimationFrame(e),i.preventDefault()):window.scrollTo(0,0)})}};s.init(),function(){var e,t,i=!1,n=$("#ppci_table"),o=$("li.PW_PCHOMEPAY_CREDIT_N_ZERO"),s=function(){e=0,n.is(":visible")&&n.hide()},a=function(){var e;i||$.getJSON(RT.config.mybid_host+"/deliver/ajax_pp_installment_bank.php?callback=?").done(function(n){n.banks&&(t=n.banks.banks,$(".ppci-bank").each(function(){e=t[this.id.replace("ppci_bank_info_","installment_")],$(this).attr("title",e.join(", ")).text(e.length+"家")}),i=!0)})};$("#ppci_table").length>0&&$("#ppci_table").on("click","a",function(e){var i=this.id.replace("ppci_bank_info_",""),n=t["installment_"+i].join(","),o=btoa(encodeURIComponent("n="+i+"&bankInfo="+n));window.open(RT.config.goods_host+"/item/pop_pp_installment_bank.html?"+o,"_blank","width=500,height=360,scrollbars=yes"),e.preventDefault(),e.stopPropagation()}),$("#ppci_table_toggle").length>0&&$("#ppci_table_toggle").click(function(e){e.preventDefault()}).mouseenter(function(){var e,t;i?(e=o.position(),n.show(),t=(n.width()-o.width())/2+parseInt(o.css("padding-left"),10)-parseInt(n.css("padding-left"),10)-parseInt(n.css("border-left-width"),10),n.css("top",e.top+o.height()+3+"px").css("left",e.left-t+"px")):a()}),n.add(o).hover(function(){e&&clearTimeout(e)},function(){e=setTimeout(s,300)}),$("#keyword").one("blur",function(){"2ch"===this.value&&$(".rt-article").css({"font-family":"MS PGothic","line-height":1})})}();var a={settings:$.extend({enable_google_ad:RT.context.g_class&&"0025"!==RT.context.g_class.substring(0,4),enable_openx_ad:1!=RT.context.is_cstore&&1!=RT.context.is_nbc,fc_class:RT.context.g_class,seller_user_nick:RT.context.seller_user_nick,is_cstore:RT.context.is_cstore,use_kwa:RT.context.use_kwa,use_4ca:RT.context.use_4ca,is_nbc:RT.context.is_nbc},RT.context),init:function(){var e=window.location.pathname;this.settings.enable_google_ad,this.settings.enable_openx_ad&&this.loadOpenXAds(),"/item/show"!=e&&"/item/qa"!=e&&"/item/history"!=e||this.settings.is_nbc||this.settings.is_cstore&&!this.settings.use_kwa||(this.settings.is_cstore&&this.settings.use_kwa?this.loadSidebarFeaturedItems():this.loadRelatedAds())},loadOpenXAds:function(){var e=this,t=RT.config.ad_host+"/ahd/goods.php",i={fc_class:this.settings.fc_class};$.get(t,i,function(t){e.renderOpenXAds(t)},"jsonp")},renderOpenXAds:function(e){"undefined"!=typeof e.hola&&null!=e.hola&&$("#ad_hola").html(e.hola),"undefined"!=typeof e[521]&&null!=e[521]&&1!=this.settings.is_cstore&&(show_ad("ad-521",e[521]),$(".ad-521").addClass("is-loaded")),"undefined"!=typeof e[522]&&null!=e[522]&&1!=this.settings.is_cstore&&(show_ad("ad-522",e[522]),$(".ad-522").addClass("is-loaded")),"undefined"!=typeof e.cat&&null!=e.cat&&1!=this.settings.is_cstore&&(show_ad("cat-ad-text",e.cat),$(".category-ad").addClass("is-loaded")),"undefined"!=typeof e.I02&&null!=e.I02&&1!=this.settings.is_cstore&&(show_ad("ad-677",e.I02),$(".ad-677").addClass("is-loaded"))},loadSidebarFeaturedItems:function(){try{var e=this,t=RT.App.getService("AjaxGetSellerBestGoodsService"),i=8;t.getBestGoods(this.settings.seller_user_nick).done(function(t){var n={},o=0;$.each(t,function(e,t){o<i&&(n[e]=t),o+=1}),e.renderSidebarFeaturedItems(n)})}catch(n){}},renderSidebarFeaturedItems:function(e){var t=a.settings,i=['<li><a class="promo-item" href="{{ item_link_url }}" title="查看商品資訊">','  <div class="promo-img-wrap">','    <img src="{{ image_path }}" alt="{{ slogan2 }}">',"  </div>",'  <div class="promo-item-body">','    <h4 class="promo-item-title">{{ slogan }}</h4>','    <div class="promo-item-content text-right">','      <span class="text-important">{{ g_now_price }} 元</span>',"    </div>","  </div>","</a></li>"].join(""),n=["<li>",'<a href="{{settings.mkt_host}}/adb/ad09_intro.html"><img border="0" src="{{ ad.image_path }}" /></a>',"</li>"].join(""),o=$("#kwad");$.each(e,function(e,s){"no_ad"==e?(s.mkt_host=t.mkt_host,o.append(Mustache.render(n,s))):(s.item_link_url=t.goods_host+"/item/show?"+s.g_no,o.append(Mustache.render(i,s)))}),$(".sponsor-ad").addClass("is-loaded")},loadRelatedAds:function(){try{$.ajax({url:this.settings.kwad_host+"/item/ahd_kwad_class.php",cache:!1,dataType:"jsonp",data:{c:this.settings.fc_class,p:1,ts:(new Date).getTime()},success:this.renderRelatedAds,error:function(){throw"ContentUnavailable"}})}catch(e){}},renderRelatedAds:function(e){var t=a.settings,i=['<li><a class="related-item promo-item" href="{{ point_host }}/kw/keyword_ad_click.php?g={{ g_no }}&a={{ main_id }}" title="查看商品資訊">','  <div class="promo-img-wrap">','    <img src="{{ image_path }}" alt="{{ slogan2 }}">',"  </div>",'  <div class="promo-item-body">','    <h4 class="promo-item-title related-item-title"><span>{{ slogan }}</span><span class="text-ellipsis">...</span><span class="ellipsis-fill"></span></h4>','    <div class="promo-item-content">','      <span class="related-item-price">$ {{ g_now_price }}</span>',"    </div>","  </div>","</a></li>"].join(""),n=["<li>",'  <a class="related-item promo-item" href="{{point_host}}/kw/keyword_ad_click.php?i={{ kwad_id }}&a={{ ad.main_id }}" title="查看商品資訊">',"    {{# image }}",'    <div class="promo-img-wrap">','      <img src="{{ image }}" alt="{{ slogan2 }}">',"    </div>","    {{/ image }}",'    <div class="promo-item-body">','      <h4 class="promo-item-title">{{ slogan }}</h4>','      <div class="promo-item-content">',"        {{ shorten_url }}","      </div>","    </div>","  </a>","</li>"].join(""),o=0,s=$("#kwad");$.each(e,function(e,a){a.point_host=t.point_host,"no_ad"==e||(14==a.kwad_id.length?(a.g_now_price=RT.Utility.toCommaFormat(a.g_now_price),s.append(Mustache.render(i,a)),o++):(a.shorten_url=a.url.substring(0,30),s.append(Mustache.render(n,a)),o++))}),o>0&&$(".sponsor-ad").addClass("is-loaded")}},r=function(){var e={},t=RT.context.g_class&&"0025"!==RT.context.g_class.substring(0,4);return e.init=function(){if(window.RT&&window.RT.DFPModule){var e=window.RT.DFPModule([{path:"/1243336/show_r_u_160x200",size:[160,200],node_id:"div-gpt-ad-1447748385472-0"},{path:"/1243336/show_r_m_160x200",size:[160,200],node_id:"div-gpt-ad-1447748385472-1"}]);RT.context.is_cstore||RT.context.is_nbc||!t||e.init()}},e}(),c={template:'<div class="loader">&nbsp;</div>',tracking:[],addAnimation:function(e){var t=$(this.template);e.data("loading",this.tracking.length),t.appendTo(e),this.tracking.push(t)},removeAnimation:function(e){var t=e.data("loading");this.tracking[t]&&(this.tracking[t].remove(),this.tracking.splice(t,1))},animationExisted:function(e){return e.find(".loader").length>0}};RT.App.addModule("goods-main",function(e){"use strict";function t(e){var t=/^[0-9]+$/;return e&&t.test(e)}function i(e){var t=$();return $.each(e,function(e,i){""!=i&&(t="object"===$.type(i)?t.add(convertToHiddenFields(i)):t.add($('<input type="hidden"/>').attr("name",e).val(i)))}),t}function o(e){f.identify(s,a).done(function(t){e.call()}).fail(function(){alert("請先登入會員!"),window.location=RT.config.member_host+"/user/login.htm?refer="+window.encodeURIComponent(window.location.href)})}var s=RT.context.g_no,a=RT.context.seller_user_nick,r=RT.context.g_mode,c=RT.context.g_class,l=RT.context.g_direct_price,d=!0,u=$(e.getElement()).find("form"),p=RT.config.goods_host+"/item/show?"+s,g="#info",h=e.getService("AjaxGoodsRemovalService"),m=e.getService("AjaxFavoriteFunctionService"),f=e.getService("AjaxIdentityCheckService");return{init:function(){var e=this;f.identify(s,a).done(function(t){t.login_seller&&t.login_flag&&(e.disableBuyerOnlyActions(),e.renderSellerOnlyBlocks(t.data),d=!1),viewStartPosition=e.getViewStartingPosition()}),"000700080001"==c&&this.renderRestrictedConstraint()},onclick:function(t,i,n){i&&i.hasAttribute("data-type")&&t.preventDefault(),"goods-premature-end-link"===n?this.confirmPrematureEnd():"goods-force-end-link"===n?this.confirmForceEnd():"goods-reupload-link"===n?this.confirmItemReupload():"show-spec-link"===n?this.toggleCustomSpecs(!0):"hide-spec-link"===n?this.toggleCustomSpecs(!1):"show-shipment-rule-link"===n?this.toggleShipmentRules($(i),!0):"hide-shipment-rule-link"===n?this.toggleShipmentRules($(i),!1):"show-countdown-link"===n?this.openRemainingTimePage($(i).attr("rel")):"show-private-tip-link"===n?this.openPrivateTipWindow():"show-qna-link"===n?e.broadcast("event:tab-change","#qa"):"show-remain-link"===n?this.openRemainingCountTipWindow():"favorite-item-link"===n?this.addFavoriteItem():"favorite-seller-link"===n?this.addFavoriteSeller():"direct-buyout-button"===n?this.doDirectBuyout():"bid-button"===n?this.doBidding():"ruruton-tip-link"===n&&this.openRurutonTipWindow()},disableBuyerOnlyActions:function(){$(".js-buyer-only").remove()},renderSellerOnlyBlocks:function(e){var t=$("#goods_stats_template"),i=$("#goods_owner_template"),n=$("#item_stats_block"),o=$("#seller_control_block");e.mybid_host=RT.config.mybid_host,e.point_host=RT.config.point_host,e.mybidu_host=RT.config.mybidu_host;var s=Mustache.render(t.html(),e);n.add(o).html(""),n.append(s),s=Mustache.render(i.html(),e),o.append(s)},renderRestrictedConstraint:function(){$("#action_direct_buyout, #action_bid").removeClass().addClass("item-soldout-action"),$(".item-purchase").addClass("is-restricted"),$("#qty").prop("disabled",!0)},doBuyoutValidation:function(){var e=$("#target_id");return!(0!==e.length&&!e.val())||(alert("請選擇規格/項目"),!1)},doDirectBuyout:function(){var e=this;o(function(){if(e.doBuyoutValidation()){var t={bid_hidden:1,bidmoney:l,bidcate:"A",bidtype:r,bidurl:window.location.href,bidpid:s,gs_class:c,ms:RT.context.ms,is_hidden:$("#private").is(":checked")?"true":"",bidnum:function(){var e="1";return"B"==r&&(e=Number($("#qty").val())),e}()};0!==$("#target_id").length&&(t.spec_id=$("#target_id").val(),t.spec_name=$("#target_spec_name").val()),u.append(i(t)).submit()}})},doBiddingValidation:function(){var e=$("#max");return!!t(e.val())||(alert("請輸入正確的出價"),e.focus().select(),!1)},doBidding:function(){var e=this;o(function(){if(e.doBiddingValidation()){var t=i({bidmoney:$("#max").val(),bidcate:$('input[name="bid_option"]:checked').val(),bidnum:1,bidtype:r,bidurl:window.location.href,bidpid:s,gs_class:c,ms:RT.context.ms,is_hidden:$("#private").is(":checked")?"true":""});u.append(t).submit()}})},toggleCustomSpecs:function(e,t){$("#custom_specs_pane").toggle(t)},toggleShipmentRules:function(e,t){var i=e.offset(),n=$(".item-purchase").offset();$("#shipment_rules_pane").css({top:i.top-n.top+24,left:i.left-n.left}).toggle(t)},addFavoriteItem:function(){o(function(){m.addItem(s,location.href)})},addFavoriteSeller:function(){o(function(){m.addSeller(a)})},openPrivateTipWindow:function(){window.open(RT.config.mybid_host+"/credit/private_what.php","tips","loaction=0,height=600,width=840,scrollbars=yes")},openRurutonTipWindow:function(){window.open(RT.config.pub_host+"/tool/alert.htm","tips","loaction=0,height=600,width=920,scrollbars=yes")},openRemainingCountTipWindow:function(){window.open(RT.config.goods_host+"/item/statement.html","tips","loaction=0,height=10,width=480,scrollbars=yes")},openRemainingTimePage:function(e){window.open(e,"clock_"+s,"loaction=0,height=285,width=480")},confirmForceEnd:function(){confirm("確定強迫下架?")&&h.forceEnd(s).done(function(e){e.data&&e.data.url&&(window.location=e.data.url)}).fail(function(e){alert(e)})},confirmPrematureEnd:function(){confirm("確定提前結束?")&&h.prematureEnd(s).done(function(e){e.data&&e.data.url&&(window.location=e.data.url)}).fail(function(e){alert(e)})},confirmItemReupload:function(){RT.context.g_num>1&&RT.context.g_sold_num>0&&confirm("重新上架本商品，是否要保留原來的銷售數量?\n保留銷售數量將不可改原分類；不保留銷售數量即複製新商品可改分類。(未分類商品均可改)")?window.open(RT.config.mybidu_host+"/upload/item_initial.php?g_no="+s+"&r_g_sold_num=true","_self"):window.open(RT.config.mybidu_host+"/upload/item_initial.php?g_no="+s,"_self")},getViewStartingPosition:n(),sendPageView:function(){ga("set","page",p)},onmessage:{"event:goods-tab-change":function(e){e.hash===g&&this.sendPageView()}}}}),RT.App.addModule("goods-qna",function(e){"use strict";function t(e,t){var i;t.mybid_host=RT.config.mybid_host,t.class_host=RT.config.class_host,t.g_no=d,t.qna_admin_block=t.login_flag&&t.login_seller,i=Mustache.render(j,t),e[0].innerHTML=i}function i(e,t){var i,n=document.createElement("div"),o=document.createDocumentFragment();t.g_no=d,t.qna_admin_block=t.login_flag&&t.login_seller,t.qna_question_block=!t.login_seller&&!t.g_closed,t.config=RT.config,i=Mustache.render(T,t),n.innerHTML=i,o.appendChild(n);for(var s=0;s<e[0].childNodes.length;s++){var a=e[0].childNodes[s].classList||[];a=Array.apply(null,a),a.indexOf("loader")===-1&&e[0].removeChild(e[0].childNodes[s])}e[0].appendChild(o)}function n(){c.removeAnimation(b),b.removeClass("is-loading"),b.children().show()}function s(){b.addClass("is-loading",!0),b.children(":not(.loader)").hide(),c.animationExisted(b)||c.addAnimation(b)}var a,r,l,d=RT.context.g_no,u="#qa",p=RT.config.goods_host+"/item/show?"+d+"#qa",g=10,h=!1,m=1,f=!1,v=!1,_=RT.context.is_api_seller,b=$(e.getElement()),w=[],y=e.getService("BrowserStorageService"),x=e.getService("AjaxGoodsQnADataService"),S=$(".qna-ask-count"),T=$("#goods_qna_layout_template").html(),j=$("#goods_qna_listing_template").html(),k=1e3,R=0;return Mustache.parse(T),{onclick:function(e,t,i){"toggle-checkbox-button"===i?(v=!v,this.toggleCheckboxes(v)):"delete-question-button"===i?this.removeQuestion():"submit-question-button"===i?(e.preventDefault(),this.submitQuestion()):"qna-refresh-link"===i||"refresh-question-button"===i?(e.preventDefault(),this.refreshQnA()):"ask-question-link"==i&&(e.preventDefault(),this.jumpToSubmitForm())},initPagination:function(e,t,i,n){var s=this;n=n||"rt-pagination";var a={perPage:g,initPage:t-1||0,containerCls:n,lockCls:"is-locked",pageRangeRule:"group_per_10",onPage:function(e){s.renderQnA(e+1),history.pushState({hash:u,p:e+1},null,o(u,e+1))},onPageInfo:function(e,t,n){this.$infoNum.text("每頁 "+this.config.perPage+" 筆，"),this.$infoTotal.text(i),this.$infoPage.text(n+"/"+t)},onLock:function(){this.$pageCurrentLink.html('<i class="fa fa-lg fa-fw fa-spinner fa-pulse"></i>')}};w.push(RT.Page.Pagination(e.empty(),i,a))},removeQuestion:function(){var t=b.find("[data-qno][type=checkbox]:checked"),i=[];i=$.map(t,function(e){return Number(e.value)}),x.removeQuestion(d,i).done(function(t){r.find(".rt-alert-content").text("刪除成功!").end().addClass("rt-alert-success").show(),e.broadcast("event:remove-qna",i)}).fail(function(e){r.find(".rt-alert-content").text(e.message).end().addClass("rt-alert-danger").show()}).always(function(){setTimeout(function(){r.hide().removeClass("rt-alert-danger rt-alert-success")},5e3)})},submitQuestion:function(){var e=this,t=l.val();x.submitQuestion(d,t).done(function(){h=!1,e.renderQnA(1),l.val("")}).fail(function(i){var n=b.find(".qna-ask-alert");n.find(".rt-alert-content").text(i.message).end().show(),setTimeout(function(){n.hide()},5e3),i.url&&(e.saveTempQuestion(t),setTimeout(function(){window.location=i.url},2e3))})},saveTempQuestion:function(e){y.isLocalStorageSupported()&&y.setLocalItem("tempQ_"+d,e)},retrieveTempQuestion:function(){var e="";return y.isLocalStorageSupported()&&(e=y.removeLocalItem("tempQ_"+d)),e},toggleCheckboxes:function(e){b.find("[data-qno][type=checkbox]").prop("checked",e)},renderQnA:function(e){var o,c=this;if(!(e===m&&h||_)){var u=x.getQuestions(d,e,g);o=Date.now(),s(),u.always(function(){R=Date.now()-o,R<k?setTimeout(n,k-R):n(),R=0}).done(function(n){h||(h=!0,i(b,n.data),c.initPagination(b.find(".bottom-pagination-placeholder"),e,Number(n.data.ask_count)),c.initPagination(b.find(".top-pagination-placeholder"),e,Number(n.data.ask_count)),a=b.find(".qna-record-list"),r=b.find(".qna-alert"),l=b.find(".rt-form-textarea"),l.val(c.retrieveTempQuestion())),m=e,v=!1,S.text(n.data.ask_count),n.data.ask_count>0&&(t(a,n.data),RT.App.startAll(a[0]),c.refreshPagination())}).fail(function(e){i(b,{qna:[],qna_error:!0,qna_error_msg:e.message,login_seller:!1,qna_disabled:e.disabled})})}window.scrollTo(0,viewStartPosition)},refreshQnA:function(){h=!1,this.renderQnA(m)},refreshPagination:function(){$.each(w,function(e,t){t.to(m-1,!0)})},sendPageView:function(){ga("set","page",p),f||(ga("send","pageview"),f=!0)},jumpToSubmitForm:function(){if(l.length){var e=l.offset();window.scrollTo(0,e.top),l.focus()}},onmessage:{"event:goods-tab-change":function(e){e.hash===u&&(!e.p&&(e.p=m),history.replaceState(e,null,o(e.hash,e.p)),this.renderQnA(e.p),this.sendPageView())},"event:remove-qna-done":function(){0===b.find(".qna-record").length&&(h=!1,this.renderQnA(1))}}}}),RT.App.addModule("goods-qna-record",function(e){"use strict";var t=$(e.getElement()),i=t.find(".rt-quickreply"),n=t.data("serial"),o=RT.context.g_no,s=e.getService("AjaxGoodsQnADataService");return{onclick:function(e,t,i){"reply-question-link"===i?this.toggleReplyQuestionArea():"reply-question-button"===i&&(e.preventDefault(),this.submitReply())},toggleReplyQuestionArea:function(){i.toggle()},submitReply:function(){var e=this,a=i.find(".rt-quickreply-textarea"),r=t.find(".rt-quickreply-error"),c=a.val();r.text(""),i.addClass("is-loading"),a.prop("disabled",!0),s.replyQuestion(o,n,c).done(function(t){a.val(""),e.addReply(t.data.answer,t.data.sh_date),e.toggleReplyQuestionArea()}).fail(function(e){r.text(e.message)}).always(function(){a.prop("disabled",!1),i.removeClass("is-loading")})},addReply:function(e,i){var n=['<div class="qna-reply rt-form-group">','  <strong class="qna-reply-title rt-form-label">答覆:</strong>','  <div class="qna-reply-message-list rt-form-control">','    <div class="qna-reply-message rt-article">{{{ HTML.answer }}}<span class="qna-record-time">{{sh_date}}</span></div>',"  </div>","</div>"].join(""),o=Mustache.render(n,{sh_date:i,HTML:{answer:e}});t.find(".qna-reply-list").append(o)},destroy:function(){t.remove(),e.broadcast("event:remove-qna-done")},onmessage:{"event:remove-qna":function(e){e.indexOf(n)!==-1&&this.destroy()}}}}),RT.App.addModule("goods-history",function(e){"use strict";function t(e,t){var i;t.mybid_host=RT.config.mybid_host,t.goods_host=RT.config.goods_host,t.class_host=RT.config.class_host,t.auction_mode_block="A"===t.g_mode,t.g_no=a,t.more_history_block=s.standalone!==!0,t.history_full_block=s.standalone!==!0&&t.history_count>d,i=Mustache.render(_,t),e[0].innerHTML=i}function i(){c.removeAnimation(m),m.removeClass("is-loading"),m.children(":not(.loader)").show()}function n(){m.addClass("is-loading",!0),m.children(":not(.loader)").hide(),c.animationExisted(m)||c.addAnimation(m)}var s=e.getConfig()||{},a=RT.context.g_no,r=RT.config.goods_host+"/item/show?"+a+"#history",l="#history",d=30,u=!1,p=1,g=!1,h=[],m=$(e.getElement()),f=m.find(".history-list"),v=$("#history_count"),_=$("#goods_history_template").html(),b=e.getService("AjaxGoodsHistoryDataService"),w=1e3,y=0;return Mustache.parse(_),{init:function(){},onclick:function(e,t,i){"history-refresh-link"===i&&this.renderHistory(p)},renderPagination:function(e,t,i,n){var s=this;n=n||"rt-pagination";var a={perPage:d,initPage:t-1||0,containerCls:n,lockCls:"is-locked",pageRangeRule:"group_per_10",onPage:function(e){s.renderHistory(e+1),history.pushState({hash:l,p:e+1},null,o(l,e+1))},onPageInfo:function(e,t,n){this.$infoNum.text("每頁 "+this.config.perPage+" 筆，"),this.$infoTotal.text(i),this.$infoPage.text(n+"/"+t)},onLock:function(){this.$pageCurrentLink.html('<i class="fa fa-lg fa-fw fa-spinner fa-pulse"></i>')}};h.push(RT.Page.Pagination(e.empty(),i,a))},renderHistory:function(e){var o,r=this;if(e!==p||!u){var c=b.getHistories(a,e,d);o=Date.now(),n(),c.done(function(i){if(u||(u=!0,v.text(i.data.history_count)),t(f,i.data),p=e,s.standalone){var n=m.find(".bottom-pagination-placeholder"),o=m.find(".top-pagination-placeholder");r.renderPagination(n,e,Number(i.data.history_count)),r.renderPagination(o,e,Number(i.data.history_count))}}).fail(function(){u=!1,t(f,{history:[],history_error:!0,login_seller:!1})}).always(function(){y=Date.now()-o,y<w?setTimeout(i,w-y):i(),y=0})}window.scrollTo(0,viewStartPosition)},sendPageView:function(){ga("set","page",r),g||(ga("send","pageview"),g=!0)},refreshPagination:function(){$.each(h,function(e,t){t.updateView(p-1)})},onmessage:{"event:goods-tab-change":function(e){e.hash===l&&(!e.p&&(e.p=p),history.replaceState(e,null,o(e.hash,e.p)),this.renderHistory(e.p),this.sendPageView())}}}}),RT.App.addModule("goods-tab-control",function(e){"use strict";function t(){var e={},t=window.location.hash||n,i=t.split("&");if(e.hash=i[0],i.length>1){var o=i[1].match(/p=(\d+)/);o&&(e.p=Number(o[1]))}return e}var i=e.getConfig(),n=i.defaultPane,s=$(e.getElement()),a="is-active",r="customizable-borderless customizable-medium";return{init:function(){var e=this;history.replaceState(t(),null,window.location.href),this.toggleTabPane(history.state),window.onpopstate=function(i){e.toggleTabPane(i.state||t())}},toggleTabPane:function(t){var i;try{i=s.find("[data-hash="+t.hash+"]")}catch(c){var l={hash:n};return history.replaceState(l,null,o(n)),void this.toggleTabPane(l)}if(0===i.length)return void this.toggleTabPane({hash:n});var d=s.find("[data-hash].is-active");d.is(i)||i.add(d).toggleClass(a).filter(".rt-tab-item").toggleClass(r),setTimeout(function(){e.broadcast("event:goods-tab-change",t)})},onclick:function(e,t,i){if("toggle-tab-link"===i){var n=$(t).parent().data("hash");this.toggleTabPane({hash:n}),this.pushHistory(n),e.preventDefault()}},pushHistory:function(e){var t=o(e);history.pushState({hash:e},null,t)},onmessage:{"event:tab-change":function(e){this.pushHistory(e),this.toggleTabPane({hash:e})}}}}),RT.App.addModule("best-goods",function(e){"use strict";var t=e.getService("AjaxGetSellerBestGoodsService");return{init:function(){this.initVue()},initVue:function(e){return new Vue({el:"#best-goods",data:{goodsHost:RT.config.goods_host,goodsList:[]},delimiters:["${","}"],computed:{},methods:{},mounted:function(){var e=this;t.getBestGoods(RT.context.seller_user_nick).done(function(t){t&&(e.goodsList=Object.keys(t).map(function(e,i){return t[e]}))})}})}}}),RT.App.addModule("also-view",function(e){"use strict";var t=e.getService("AjaxGetAlsoViewGoodsInfoService"),i=e.getService("AjaxSendAlsoViewClickLogService"),n=5,o=RT.context.g_no;return{init:function(){this.initVue()},initVue:function(e){return new Vue({el:"#also-view",data:{goodsHost:RT.config.goods_host,goodsList:[]},delimiters:["${","}"],computed:{},methods:{fillGoodsList:function(){if(this.goodsList.length%n!==0){var e=n-this.goodsList.length%n,t=this.goodsList.slice(),i=t.splice(n-e,e);this.goodsList=this.goodsList.concat(i)}},sendAlsoViewClickLog:function(e){i.sendAlsoViewClickLog(o,e)}},mounted:function(){var e=this;t.setGoodsList(o,this.goodsList).done(function(t){e.fillGoodsList()})}})}}}),RT.context.if_ad_enabled&&(a.init(),r.init()),window.onload=function(){var e=n();viewStartPosition=e(),RT.context.youtube_link&&RT.Youtube.showYoutube("800","390",RT.context.youtube_link),function(e,t,i){var n,o=e.getElementsByTagName(t)[0];e.getElementById(i)||(n=e.createElement("script"),n.id=i,n.async=!0,n.src="//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.4",o.parentNode.insertBefore(n,o))}(document,"head","facebook-jssdk"),function(e,t){var i,n=e.getElementsByTagName(t)[0];i=e.createElement("script"),i.async=!0,i.defer=!0,i.src="https://apis.google.com/js/platform.js",i.innerHTML='{lang: "zh-TW"}',n.parentNode.insertBefore(i,n)}(document,"head")},new Vue({el:"#item_gallery",data:{imgData:RT.context.img_data||[],showPopup:!1,mainImg:"",gName:RT.context.g_name},components:["goods-thumbnail-popup"],methods:{imgPopup:function(e){this.showPopup=e},mainImgChange:function(e){this.mainImg=e},addFavoriteItem:function(e){$(e).trigger("click")}}})},"./d/components/goods_gallery.js":function(e,t){!function(e){var t=['<div v-if="imgData.length">','<div class="item-gallery-thumbnail">','  <div class="item-gallery-thumbnail-direction"><b v-if="imgData.length>4" @click="moveImgList(-1)" class="rti rti-chevron-left-default arrow-left" :class="leftStopClass"></b></div>','  <div class="item-gallery-thumbnail-wrap js-img-list-wrap">','    <ul class="item-gallery-thumbnail-list js-img-list" :style="{marginLeft: thumbnailMove}">','      <li v-for="(item, idx) in imgData" class="item-img-item" @mouseenter="mouseChangeImg(idx)" @click="imgPopup(true)" :class="{imgSelected: idx === selectedImgIdx}">','        <img :src="item.s" alt="">',"      </li>","    </ul>","  </div>",'  <div class="item-gallery-thumbnail-direction"><b v-if="imgData.length>4" @click="moveImgList(1)" class="rti rti-chevron-right-default arrow-right" :class="rightStopClass"></b></div>',"</div>",'<div ref="jqmodal" class="img-popup rt-jqmodal" @click="imgPopup(false)">','  <div class="rt-jqmodal-panel" @click.stop="">','    <button class="rt-jqmodal-jqmClose" type="button" title="關閉視窗" @click="imgPopup(false)">×</button>','    <div class="img-popup-content">','      <div><b v-if="imgData.length>1" class="img-popup-arrow rti rti-3x rti-chevron-left-default arrow-left" @click="popupChangeImg(-1)"></b></div>','      <div class="img-popup-content-img">','        <a :href="this.imgData[selectedImgIdx].ori" class="img-popup-img-link" target="_bland" title="查看原圖"></a>','        <div class="img-popup-img-wrap" v-for="(item, idx) in imgData" v-show="idx === selectedImgIdx || idx === neighborIdx" :class="transitionClass(idx, moveDirection)" :style="backgroundOri(item.ori)">',"        </div>","      </div>",'      <div><b v-if="imgData.length>1" class="img-popup-arrow rti rti-3x rti-chevron-right-default arrow-right" @click="popupChangeImg(1)"></b></div>',"    </div>",'    <div class="img-popup-select">','      <h5 class="text-left rt-mb-2x rt-text-large rt-article rt-mt-4x">${ gName }</h5>','      <ul class="item-gallery-thumbnail-list text-left js-img-list">','        <li v-for="(item, idx) in imgData" class="img-popup-thumbnail item-img-item rt-ml rt-mb" @mouseenter="mouseChangeImg(idx)" :class="{imgSelected: idx === selectedImgIdx}">','          <img :src="item.s" alt="">',"        </li>","      </ul>",'      <div ref="favoiteItem" class="js-buyer-only img-popup-track rt-mt-3x" data-type="favorite-item-link" @click="addFavorite">','        <span class="rti rti-heart-pinkheart"></span>','        <a class="img-popup-favorite-link" href="javascript:void(0)" title="加入追蹤" rel="nofollow">加入追蹤</a>',"      </div>","    </div>","  </div>","</div>","</div>"].join("");e.directive("img",function(e,t){t.value&&(e.src=t.value)}),e.component("goods-thumbnail-popup",{template:t,delimiters:["${","}"],props:{imgData:Array,isVisible:{type:Boolean,"default":!1},gName:String,selectedImgIdx:{type:Number,"default":0},thumbnailMove:{type:String,"default":null},visibleItem:{type:Number,"default":4},leftStop:{type:Boolean,"default":!0},rightStop:{type:Boolean,"default":!1},moveDirection:{type:Number,"default":null},neighborIdx:{type:Number,"default":null}},computed:{leftStopClass:function(){return{itemStop:this.leftStop,"rti-chevron-left-stop":this.leftStop}},rightStopClass:function(){return{itemStop:this.rightStop,"rti-chevron-right-stop":this.rightStop}}},methods:{mouseChangeImg:function(e){this.selectedImgIdx=e,this.moveDirection=null},imgPopup:function(e){this.isVisible=e},popupChangeImg:function(e){var t=this.selectedImgIdx+e;t===-1&&e===-1?t=this.imgData.length-1:t===this.imgData.length&&1===e&&(t=0),this.selectedImgIdx=t,this.moveDirection=e},moveImgList:function(e){var t=i.moveImg(e,this.visibleItem);this.rightStop=1===e&&t.stopFlag,this.leftStop=e===-1&&t.stopFlag,this.thumbnailMove=t.moveVal+"px"},transitionClass:function(e,t){var i=function(e,t){return e<0?e=t.length-1:e>t.length-1&&(e=0),e}(this.selectedImgIdx-t,this.imgData),n=1===t,o=t===-1,s=e===this.selectedImgIdx,a=e===i;return this.neighborIdx=i,{toLeftFade:n&&a,fromRightFade:n&&s,toRightFade:o&&a,fromLeftFade:o&&s}},addFavorite:function(){this.$emit("addfavoriteitem",this.$refs.favoiteItem)},backgroundOri:function(e){return{"background-image":"url("+e+")"}}},mounted:function(){this.$modal=$(this.$refs.jqmodal).jqm()},watch:{isVisible:function(e){e?this.$modal.jqmShow():this.$modal.jqmHide(),this.$emit("closepopup",e),this.moveDirection=null,$("body").css("overflowY",e?"hidden":"auto")},selectedImgIdx:function(e){this.$emit("imgchange",this.imgData[e].m),this.imgOri=this.imgData[e].ori}}});var i=function(){function e(e,n){var o=$(".js-img-list-wrap"),s=$(".js-img-list"),a=o.outerWidth(),r=(s[0].scrollWidth,RT.context.img_data.length-n);return i+=e,i>r||i<0?i-=e:t-=a/n*e,{moveVal:t,stopFlag:i===r||0===i}}var t=0,i=0;return{moveImg:e}}()}(window.Vue)},"./services/AjaxHeaderDataService.js":function(e,t){RT.App.addService("AjaxHeaderDataService",function(e){"use strict";function t(){return n=s.retrieve(),n?n:i()}function i(){var e=$.Deferred(),t=RT.config&&RT.config.member_host||"https://member.ruten.com.tw";return o=!0,$.ajax({url:t+"/user/ajax_header_slice.php",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){t?(s.save(t),e.resolve(t)):e.reject()},error:function(t,i,n){e.reject(i)},complete:function(){o=!1}}),e}var n={},o=!1,s=e.getService("HeaderDataStorageService");return{getData:function(e){var i=this;if(o)return e=e||$.Deferred(),setTimeout(function(){i.getData(e)},100),e;if(e){var n=t();n?$.isFunction(n.then)?n.done(e.resolve).fail(e.reject):e.resolve(n):e.reject()}return t()},resetData:function(){s.reset()}}}),RT.App.addService("HeaderDataStorageService",function(e){"use strict";function t(){var e=Cookies.get(a,{domain:r});return e&&s(e)}function i(e){var t=new Date;t.setMinutes(t.getMinutes()+3),e=o(e),Cookies.set(a,e,{domain:r,expires:t})}function n(){Cookies.remove(a,{domain:r})}function o(e){return window.btoa(JSON.stringify(e))}function s(e){return JSON.parse(window.atob(e))}var a="rt_header_info",r="ruten.com.tw",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return window.btoa||(window.btoa=function(e){for(var t,i="",n=-6,o=0,s=0,a=0;s<e.length||n>-6;)0>n&&(s<e.length?(t=e.charCodeAt(s++),a+=8):t=0,o=(255&o)<<8|255&t,n+=8),i+=c.charAt(a>0?o>>n&63:64),n-=6,a-=6;return i},window.atob=function(e){for(var t,i,n="",o=-8,s=0,a=0;a<e.length;a++)(t=c.indexOf(e.charAt(a)))<0||(s=s<<6|63&t,(o+=6)>=0&&(i=s>>o&255,64!=t&&(n+=String.fromCharCode(i)),s&=63,o-=8));return n}),{retrieve:function(){return t()},save:function(e){i(e)},reset:function(){n()}}})},"./services/AjaxGoodsRemovalService.js":function(e,t){RT.App.addService("AjaxGoodsRemovalService",function(e){"use strict";function t(e){switch(e){case 1001:return"請先登入後，再試一次！";case 2001:return"資料不符合規定";case 3001:return"找不到此商品";case 3002:return"該商品不是自己的商品";case 3003:return"此商品已下架";case 3004:return"此商品已被人下標";case 3007:return"此商品已刪除";default:return"系統忙碌中，請稍後再試"}}function i(e){
return"undefined"!=typeof e?$.isArray(e)?e.filter(function(t,i){return e.indexOf(t)===i}).join(","):e:""}function n(e,t){var n=i(t),o=$.Deferred();return""!==n?$.ajax(RT.config.mybid_host+"/master/action_sellnow.php",{data:{type:e,gno_list:n},type:"post",dataType:"json",xhrFields:{withCredentials:!0},success:function(e){"success"===e.status?(e.data.list=n.split(","),o.resolve(e)):"error"!==e.status&&"fail"!==e.status||(e.message=e.message||"系統忙碌中，請稍後再試",o.reject(e.message))},error:function(){o.reject("系統忙碌中，請稍後再試")}}):o.reject("系統忙碌中，請稍後再試"),o}function o(e,n){var o=i(n),s=$.Deferred();return""!==o?$.ajax(RT.config.mybid_host+"/ajax/item_close.php",{data:{type:e,g_no_list:o},type:"post",dataType:"json",xhrFields:{withCredentials:!0},success:function(e){"success"===e.status?s.resolve():"fail"===e.status&&s.reject(t(e.error_code))},error:function(){s.reject("系統忙碌中，請稍後再試")}}):s.reject("系統忙碌中，請稍後再試"),s}function s(e){var n=i(e),o=$.Deferred();return""!==n?$.ajax(RT.config.mybid_host+"/ajax/item_delete.php",{data:{g_no_list:n},type:"post",dataType:"json",xhrFields:{withCredentials:!0},success:function(e){"success"===e.status?o.resolve():"fail"===e.status&&o.reject(t(e.error_code))},error:function(){o.reject("系統忙碌中，請稍後再試")}}):o.reject("系統忙碌中，請稍後再試"),o}return{forceEnd:function(e){return n("down",e)},prematureEnd:function(e){return n("over",e)},forceEndMobile:function(e){return o("down",e)},removalGoods:function(e){return s(e)}}})},"./services/AjaxFavoriteFunctionService.js":function(e,t){RT.App.addService("AjaxFavoriteFunctionService",function(e){"use strict";function t(e,t){return $.ajax({url:n.remoteHost+n.remotePath,type:"post",data:{g_no:e,tourl:t},xhrFields:{withCredentials:!0}})}function i(e){return $.ajax({url:o.remoteHost+o.remotePath,type:"post",data:{seller_user_nick:e},dataType:"json",xhrFields:{withCredentials:!0}})}var n={resHandler:window.alert,remotePath:"/api/addFavoriteItem.php",remoteHost:RT.config.mybid_host},o={resHandler:window.alert,remotePath:"/api/addFavoriteSeller.php",remoteHost:RT.config.mybid_host},s={"OK,IT_IS_SUCCESS":"已經將此商品加入「追蹤中」!","ERROR,QUERY":"系統忙碌中，請稍後再試","ERROR,NO G_NO":"商品不存在","ERROR,HAVE BEEN MAX":"您設定要追蹤的商品超過1000個的上限",DEFAULT:"請先登入會員！"},a={NO_LOGIN:"請先登入會員！",OVERFLOW:"最愛賣家名單最多新增1000筆！",EXISTS:"已經是你的最愛賣家!",GO_ON:"已將此賣家加入「最愛賣家」",DEFAULT:"系統忙碌中，請稍後再試！"};return{addItem:function(e,t,i){i&&"function"==typeof i&&(n.resHandler=i),this.addItemDeferred(e,t).done(function(e){var t=s[e]?s[e]:s.DEFAULT;n.resHandler.call(window,t,e)}).fail(function(){n.resHandler.call(window,"系統忙碌中，請稍後再試","ERROR")})},addItemDeferred:function(e,i){return t.apply(this,arguments)},addSeller:function(e,t){t&&"function"==typeof t&&(o.resHandler=t),this.addSellerDeferred(e).done(function(e){var t=e&&e.status||"DEFAULT",i=a[t];o.resHandler.call(window,i,e)}).fail(function(){o.resHandler.call(window,"系統忙碌中，請稍後再試","ERROR")})},addSellerDeferred:function(e,t){return i.apply(this,arguments)},setItemConfig:function(e){n=$.extend({},n,e)},setSellerConfig:function(e){o=$.extend({},o,e)}}})},"./services/AjaxGoodsQnADataService.js":function(e,t){RT.App.addService("AjaxGoodsQnADataService",function(e){"use strict";function t(e,t,i){var n=$.Deferred();return t=t||1,i=i||10,$.ajax({url:RT.config.mybid_host+"/api/items/goods_qna.php",dataType:"json",data:{g:e,p:t,s:i},xhrFields:{withCredentials:!0},success:function(e){e&&"success"===e.status?n.resolve(e):n.reject(a(e,"無法取得問與答清單"))},error:function(){n.reject(!1)}}),n}function i(e,t){var i=$.Deferred();return 0===t.length?i.reject({message:"請先勾選欲刪除的問題!"}):$.ajax({url:RT.config.mybid_host+"/api/items/qa_del.php",type:"post",dataType:"json",data:{del_code:t},xhrFields:{withCredentials:!0},success:function(e){e&&"success"===e.status?i.resolve(e):"error"===e.status&&(e=a(e),i.reject(e))},error:function(){i.reject({message:"系統忙碌中，請稍後再試"})}}),i}function n(e,t){var i=$.Deferred();return 0===t.length?i.reject({message:"問題內容請勿空白!"}):s(t)>500?i.reject({message:"問題內容過長，請勿輸入超過250個中文字"}):$.ajax({url:RT.config.mybid_host+"/api/items/qa_ins.php",type:"post",dataType:"json",data:{g_no:e,content:t},xhrFields:{withCredentials:!0},success:function(e){e&&"success"===e.status?i.resolve(e):"error"===e.status&&(e=a(e),i.reject(e))},error:function(){i.reject({message:"系統忙碌中，請稍後再試"})}}),i}function o(e,t,i){var n=$.Deferred();return 0===i.length?n.reject({message:"問題內容請勿空白!"}):s(i)>500?n.reject({message:"問題內容過長，請勿輸入超過250個中文字"}):$.ajax({url:RT.config.mybid_host+"/api/items/qa_reply.php",type:"post",dataType:"json",data:{g_no:e,q:t,reply_content:i},xhrFields:{withCredentials:!0},success:function(e){e&&"success"===e.status?n.resolve(e):"error"===e.status&&(e=a(e),n.reject(e))},error:function(){n.reject({message:"系統忙碌中，請稍後再試"})}}),n}function s(e){var t=(e.match(/[^\x00-\xff]/g)||"").length;return e.length+t}function a(e,t){switch(e=e||{},e.disabled=!1,e.code){case"TooManyPost":e.message="您本日問與答發問數量已超過系統上限!";break;case"BadParameter":e.message="您本日問與答發問數量已超過系統上限!";break;case"GoodsItemNotFound":e.message="對不起，找不到此商品的相關資料，請確認是否有此商品!!!";break;case"BannedBySeller":e.message="對不起，您已被此會員設為黑名單，無法於此賣場使用本功能。";break;case"TemporarilySuspendUsage":e.message="對不起，你可能被拍賣系統停權中，無法使用。若有疑問請與客服中心聯絡。";break;case"NeedCertify":e.message="對不起，您尚未通過認證，無法向賣家提問題。若有疑問請與客服中心聯絡。",e.refreshable=!0;break;case"NeedLogIn":e.message="對不起，您尚未登入! 即將導向登入頁...",e.url=RT.config.member_host+"/user/login.htm?refer="+window.encodeURIComponent(window.location.href);break;case"TemporarilySuspendUsage":e.message="對不起，你可能被拍賣系統停權中，無法使用。若有疑問請與客服中心聯絡。";break;case"DisableUseQna":e.message="此賣家不具有問與答功能。",e.disabled=!0;break;case"DataError":case"QuestionNotFound":case"CaptchaMissMatch":case"ContentViolated":e.message=" 資料錯誤!";break;default:e.message=t||"系統忙碌中，請稍後再試"}return e}return{getQuestions:function(e,i,n){return t(e,i,n)},removeQuestion:function(e,t){return i(e,t)},submitQuestion:function(e,t){return n(e,t)},replyQuestion:function(e,t,i){return o(e,t,i)}}})},"./services/AjaxGoodsHistoryDataService.js":function(e,t){RT.App.addService("AjaxGoodsHistoryDataService",function(e){"use strict";function t(e,t,i){var n=$.Deferred();return t=t||1,i=i||10,$.ajax({url:RT.config.mybid_host+"/api/items/goods_history.php",dataType:"json",data:{g:e,p:t,s:i},xhrFields:{withCredentials:!0},success:function(e){e&&"success"===e.status?n.resolve(e):n.reject(!1)},error:function(){n.reject(!1)}}),n}return{getHistories:function(e,i,n){return t.apply(this,arguments)}}})},"./services/AjaxIdentityCheckService.js":function(e,t,i){i("./services/AjaxHeaderDataService.js"),RT.App.addService("AjaxIdentityCheckService",function(e){"use strict";function t(){var e,t=$.Deferred(),i=s.getData();return $.isFunction(i.then)?i.done(function(e){e?t.resolve():t.reject()}).fail(function(){t.reject()}):(e=i,e?t.resolve():t.reject()),t}function i(e,t){return $.ajax({url:RT.config.mybid_host+"/api/items/seller_management.php",dataType:"json",data:{g:t},xhrFields:{withCredentials:!0}}).done(function(t){t.login_seller=t.data.login_seller,t.login_flag=t.data.login_flag,t&&"success"===t.status&&(t.login_seller=t.data&&t.data.login_seller,t.login_flag=t.data&&t.data.login_flag,e.resolve(t))}).fail(function(){e.reject()}),e}function n(e){var n=t(),o=$.Deferred();return n.done(function(){i(o,e)}).fail(function(){o.reject()}),o}var o,s=e.getService("AjaxHeaderDataService");return{identify:function(e,t){return o=t,n(e)}}})},"./services/AjaxGetAlsoViewGoodsInfoService.js":function(e,t){RT.App.addService("AjaxGetAlsoViewGoodsInfoService",function(e){"use strict";function t(e){return $.ajax({url:RT.config.rtapi_host+"/api/cf/v1/index.php/browse/itembase/prod",type:"GET",dataType:"jsonp",jsonp:"_callback",jsonpCallback:"callback",cache:!0,data:{q:e}})}function i(e){return $.ajax({url:RT.config.alert_host+"/alsoview/goodsinfo.php",type:"POST",dataType:"json",data:{g_no:e}})}function n(e,t,r){i(e).done(function(e){"success"===e.status?0!==e.data.gno_list.length?(e.data.gno_list.forEach(function(e,i){t.length<a&&t.push(e)}),s.length<=0||t.length>=a?r.resolve("finish collect"):n(o(s),t,r)):r.resolve("finish collect"):r.reject(e.message)})}function o(e){return e.splice(0,20)}var s=[],a=20;return{setGoodsList:function(e,i){var a=$.Deferred();return t(e).done(function(e){s=e,e.length>=5?n(o(s),i,a):a.reject("數量不足")}),a},getAlsoViewGoodsInfo:function(e){return t(e)},checkAsloViewGoodsValid:function(e){return i(e)}}})},"./services/AjaxGetSellerBestGoodsService.js":function(e,t){RT.App.addService("AjaxGetSellerBestGoodsService",function(e){"use strict";function t(e){return $.ajax({url:RT.config.kwad_host+"/item/get_best_goods_4.php",cache:!1,dataType:"jsonp",data:{s:e,p:1,ts:(new Date).getTime()}})}return{getBestGoods:t}})},"./services/AjaxSendAlsoViewClickLogService.js":function(e,t){RT.App.addService("AjaxSendAlsoViewClickLogService",function(e){"use strict";function t(e,t){return $.ajax({url:RT.config.mybid_host+"/api/alsoview_click.php?rg="+e+"&tg="+t,type:"POST",xhrFields:{withCredentials:!0},data:{rg:e,tg:t}})}return{sendAlsoViewClickLog:t}})},"./d/components/goods_spec_chooser.js":function(e,t){var i=function(){function e(e){return Object.keys(e).map(function(t){return e[t]})}function t(e,t){return t.map(function(e){return e.spec_id}).indexOf(e)}function i(e,i){var n=t(e,i);return n!==-1?i[n].spec_name:""}function n(e,i){var n=t(e,i);return n!==-1?i[n].spec_name_big5:""}function o(e,t,i){var n={};return $.each(t,function(e,t){"0"===t.parent_id.toString()&&"Y"===t.spec_status&&(n[e]=t)}),2===e&&$.each(n,function(e,t){var n=0;$.each(t.childs,function(e,t){i[e].spec_status&&(n+=i[e].spec_num)}),t.spec_num=n}),n}function s(e){return e?e.goods_no:null}function a(e){var t={};return $.each(e,function(e,i){"0"===i.parent_id.toString()&&(t[i.spec_id]=i)}),t}function r(e){var t={};return $.each(e,function(e,i){"0"!==i.parent_id.toString()&&(t[i.spec_id]=i)}),t}function c(e,t){var i={},n=a(t),o=r(t);return 1===e?$.each(n,function(e,t){i[e]=t,i[e].spec_num=Number(t.spec_num),i[e].spec_status="Y"===t.spec_status,i[e].spec_ext=s(t.spec_ext),i[e].parent_name=null,i[e].spec_name_big5=t.spec_name_big5}):2===e&&$.each(o,function(e,t){i[e]=t,i[e].spec_num=Number(t.spec_num),i[e].spec_status="Y"===t.spec_status,i[e].spec_ext=s(t.spec_ext),i[e].parent_name=n[t.parent_id].spec_name,i[e].spec_name_big5=t.spec_name_big5}),i}var l={},d={},u=0,p={},g=[],h={},m={};return l=RT.context.spec_info?$.extend(!0,{},RT.context.spec_info):{level:0,structure:{},specs:{}},d=e($.extend(!0,{},l.specs)),m=c(l.level,$.extend(!0,{},l.specs)),p=o(l.level,$.extend(!0,{},l.specs),m),$.each(m,function(e,t){var i=0;if(t.spec_status){$.each(m,function(e,n){n.spec_status&&n.spec_num&&n.spec_name===t.spec_name&&(i+=n.spec_num)});var n={spec_id:t.spec_id,parent_id:t.parent_id,spec_name:t.spec_name,spec_num:i,spec_status:"Y"};h[t.spec_name]=n}}),$.each(h,function(e,t){g.push(t)}),l.level||(u=Number(RT.context.remain_count),u>99&&(u=99)),{raw:l,rawList:d,specList:p,itemData:g,itemDetailList:m,buyLimitNoSpec:u,getParentName:i,getParentNameBig5:n}}();new Vue({el:"#goods-spec-setting",delimiters:["${","}"],data:{level:i.raw.level,rawList:i.rawList,specRawList:$.extend(!0,{},i.specList),specList:i.specList,itemList:i.itemData,itemDetailList:i.itemDetailList,targetSpecID:"",targetItemID:"",targetItemName:"",buyCount:1,buyLimitNoSpec:i.buyLimitNoSpec,remainCount:Number(RT.context.remain_count)},computed:{stopIncrease:function(){return this.level?this.buyCount>=this.buyLimit:this.buyCount>=this.buyLimitNoSpec},stopDecrease:function(){return this.buyCount<=1},specs:function(){if(this.targetItemID){var e=this.itemDetailList[this.targetItemID].spec_name,t=this._getObjContent($.extend(!0,{},this.specRawList)),i=[],n=[];return $.each(this.itemDetailList,function(t,o){o.spec_name===e&&o.spec_status&&(i.push(o.parent_id),0===Number(o.spec_num)&&n.push(o.parent_id))}),$.each(t,function(e,t){t.spec_status=i.indexOf(t.spec_id)!==-1?"Y":"N",t.spec_num=n.indexOf(t.spec_id)!==-1?0:1}),t}return this._getObjContent(this.specRawList)},varies:function(){return this.targetSpecID?this._getVaries(this.targetSpecID):this.itemList},selected:function(){var e=this;if(this.buyCount=1,1===this.level)return this.targetSpecID;if(2===this.level&&this.targetSpecID&&this.targetItemID){var t="",i={};return t=this.itemDetailList[this.targetItemID].spec_name,$.each(this.itemDetailList,function(n,o){o.spec_name===t&&o.parent_id===e.targetSpecID&&(i=o)}),i.spec_id}},selectedName:function(){var e=this;if(1===this.level)return this.targetSpecID?this.itemDetailList[this.targetSpecID].spec_name_big5:"";if(2===this.level){if(this.targetSpecID&&this.targetItemID){var t,n=this.itemDetailList[this.targetItemID].spec_name;return $.each(this.itemDetailList,function(i,o){o.spec_name===n&&o.parent_id===e.targetSpecID&&(t=i)}),i.getParentNameBig5(this.targetSpecID,this.rawList)+encodeURI(" ")+this.itemDetailList[t].spec_name_big5}return""}},buyLimit:function(){var e=0;return this.level&&this.selected?(e=this._getStock(this.selected),e>99?99:e):1},stock:function(){return this.selected?this._getStock(this.selected):this.remainCount}},methods:{increase:function(){this.buyCount++},decrease:function(){this.buyCount--},showOption:function(e){return"Y"===e},disableOption:function(e){return e<=0},setSpec:function(e){this.targetSpecID===e.spec_id?this.targetSpecID="":this.targetSpecID=e.spec_id},setItem:function(e){this.targetItemName===e.spec_name?(this.targetItemID="",this.targetItemName=""):(this.targetItemID=e.spec_id,this.targetItemName=this.itemDetailList[this.targetItemID].spec_name)},_getChildList:function(e){return $.grep(this._getObjContent(this.itemDetailList),function(t,i){return t.parent_id===e})},_getStock:function(e){return this.itemDetailList[e].spec_num},_getObjContent:function(e){return Object.keys(e).map(function(t){return e[t]})},_getVaries:function(e){var t=[];return $.each(this.itemDetailList,function(i,n){n.parent_id===e&&t.push({spec_id:n.spec_id,parent_id:n.parent_id,spec_name:n.spec_name,spec_num:n.spec_num,spec_status:n.spec_status?"Y":"N",spec_name_big5:n.spec_name_big5})}),t}},watch:{buyCount:function(e){var t=this.level?this.buyLimit:this.buyLimitNoSpec,i=Number(e);t>99&&(t=99),i<=0?this.buyCount=1:i>t&&(this.buyCount=t)}}})},"./d/components/rt_ad_ui.js":function(e,t){var i='<div><div class="rt-ad-heading-wrapper"><slot name="rt-ad-heading"></slot><ul class="rt-ad-control" v-if="goodsList.length > 5"><li class="rt-ad-control-item">  <p class="rt-ad-control-page">{{ page }}</p></li><li class="rt-ad-control-item">  <button class="item-qty-button rt-ad-button" @click="moveLeft" :disabled="currentPage === 1">  < </button></li><li class="rt-ad-control-item">  <button class="item-qty-button rt-ad-button" @click="moveRight" :disabled="currentPage === totalPage"> > </button></li></ul></div><div class="content">  <div class="rt-ad-list-container">    <div ref="list" class="rt-ad-list" :style="listStyle">      <slot name="rt-ad-item" :goods-list="goodsList" >      </slot>    </div>  </div></div></div>',n=5,o=190;Vue.component("rt-ad-ui",{template:i,props:["goodsList"],data:function(){return{goodsList:this.goodsList,currentPage:1,currentIndex:0}},computed:{listStyle:function(){return{width:o*this.goodsList.length+"px"}},totalPage:function(){return Math.floor((n+this.goodsList.length-1)/n)},page:function(){return this.currentPage+"/"+this.totalPage}},methods:{moveRight:function(){this.currentPage<this.totalPage&&(this.currentIndex+n<=this.goodsList.length-n?this.creaseIndex(n):this.creaseIndex(this.goodsList.length%n),this.currentPage+=1)},moveLeft:function(){this.currentPage>1&&(this.currentIndex%n===0?this.creaseIndex(-n):this.creaseIndex(-this.goodsList.length%n),this.currentPage-=1)},creaseIndex:function(e){this.currentIndex=this.currentIndex+e}},watch:{currentIndex:function(e){$(this.$refs.list).stop().animate({right:o*e})}}})},"./services/BrowserStorageService.js":function(e,t){RT.App.addService("BrowserStorageService",function(e){"use strict";return{isLocalStorageSupported:function(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}},isSessionStorageSupported:function(){var e="test";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}},setLocalItem:function(e,t){localStorage.setItem(e,JSON.stringify(t))},getLocalItem:function(e){return JSON.parse(localStorage.getItem(e))},removeLocalItem:function(e){var t=this.getLocalItem(e);return localStorage.removeItem(e),t},setSessionItem:function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},getSessionItem:function(e,t){return JSON.parse(sessionStorage.getItem(e))},removeSessionItem:function(e){var t=this.getSessionItem(e);return sessionStorage.removeItem(e),t}}})}});